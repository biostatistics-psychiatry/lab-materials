{
  "hash": "c258d8259a81a0eb34611af3120b27dc",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab: Sampling from a population\"\nnumber-sections: true\nformat: live-html\nengine: knitr\nwebr:\n  packages:\n    - dplyr\n    - tableone\nresources:\n  - ../data/steps_clean.csv\n---\n\n::: {.cell}\n\n:::\n\n\n\nIn this lab, we'll practice calculating p-values and confidence intervals in R. This is based on the [Sampling from a population](../chapters/sampling.qmd) chapter.\n\n\n::: {.cell setup='true' exercise='ex_1'}\n```{webr}\n#| setup: true\n#| exercise: ex_1\n# Load the CSV data\nlibrary(dplyr)\ndf_clean <- read.csv(\"data/steps_clean.csv\")\n```\n:::\n\n\nIf you are working in R Studio, first load packages and data:\n\n\n::: {.cell}\n```{webr}\n#| label: setup-session\nlibrary(dplyr)\n\n# Load the CSV data\ndf_clean <- read.csv(\"data/steps_clean.csv\")\n```\n:::\n\n\n::::: panel-tabset\n## Exercise 1\n\nCalculate the standard error of the GAD-7 scale at the screening (`df_clean$gad_screen`), and describe in words what the number means.\n\n\n::: {.cell exercise='ex_1'}\n```{webr}\n#| exercise: ex_1\n\n```\n:::\n\n\n## Hints\n\n::: {.hint exercise=\"ex_1\"}\nThe formula for the standard error of a mean using the sample variance $s^2$ is:\n\n$$\nSE = {\\sqrt{s^2 / n}}\n$$\nYou can save the different parts of the formula as objects in your R environment:\n``` r\ns2 <-  var(df_clean$gad_screen)\nn <- length(df_clean$gad_screen)\nse <- sqrt(_________)\n #<1>\n```\n:::\n\n## Solution\n\n::: {.solution exercise=\"ex_1\"}\nThe full solution is:\n\n``` r\ns2 <-  sd(df_clean$gad_screen)\nn <- length(df_clean$gad_screen)\nse <- sqrt(s2/n)\nse\n #<1>\n```\n\nThis value represents the standard deviation of the *sampling distribution*. In other words, it represents the average spread of the mean values of repeated samples taken from the underlying population.\n:::\n:::::\n\n\n::: {.cell setup='true' exercise='ex_2'}\n```{webr}\n#| setup: true\n#| exercise: ex_2\n# Load the CSV data\nlibrary(dplyr)\ndf_clean <- read.csv(\"data/steps_clean.csv\")\n```\n:::\n\n\n::::: panel-tabset\n## Exercise 2\n\nCalculate the standard error for the proportion of participants with a high income in the STePS study, and describe the meaning of this number in words.\n\n\n::: {.cell exercise='ex_2'}\n```{webr}\n#| exercise: ex_2\n#simulate some income data\nn= nrow(df_clean)\nincome_levels <- c(\"Low\", \"Medium\", \"High\")\nincome_probs <- c(0.2, 0.6, 0.2) # Adjust probabilities as needed\ndf_clean$income <- sample(income_levels, size = n, replace = TRUE, prob = income_probs)\n\n```\n:::\n\n\n## Hints\n\n::: {.hint exercise=\"ex_2\"}\nThe formula for the standard error of a proportion is:\n\n$$\n\\mathrm{SE}(p) = \\sqrt{\\frac{p(1 - p)}{n}}\n$$\nYou can save the different parts of the formula as objects in your R environment:\n``` r\np <- mean(df_clean$income==\"High\") # using the mean function to get the probability, please ask about how this works :)\nn <- nrow(___) # the number of observations (since we have no NA values) \nse <- sqrt(___) # standard error \nse\n #<2>\n```\n:::\n\n## Solution\n\n::: {.solution exercise=\"ex_2\"}\nThe full solution is:\n\n``` r\n#simulate some income data\nn= nrow(df_clean)\nincome_levels <- c(\"Low\", \"Medium\", \"High\")\nincome_probs <- c(0.2, 0.6, 0.2) # Adjust probabilities as needed\ndf_clean$income <- sample(income_levels, size = n, replace = TRUE, prob = income_probs)\n\np <- mean(df_clean$income==\"High\") # using the mean function to get the probability \nn <- nrow(df_clean) # the number of observations (since we have no NA values) \nse <- sqrt(p * (1 - p) / n) # standard error \nse\n #<2>\n```\n:::\n:::::\n\n::: panel-tabset\n## Exercise 3\n\nReason about what would happen to the standard error if the sample size was increased to 1000, and why?\n\n\n## Hints\n\n- Recall the formula for the standard error:  \n  - Standard error of a mean: $SE = \\frac{s}{\\sqrt{n}}$  \n  - Standard error of a proportion: $SE_p = \\sqrt{\\frac{p(1-p)}{n}}$ \n- Focus on what happens when \\(n\\) gets larger.  \n- Think about variability: more data means more stability in the estimate.\n\n## Solution\n\nThe standard error **decreases** as the sample size increases.  \n\n- For a **mean**, when \\(n = 1000\\), the denominator $\\sqrt{n}$ becomes much larger, so the SE shrinks.  \n- For a **proportion**, the same principle applies: $\\sqrt{\\frac{p(1-p)}{n}}$ becomes smaller when $n$ is larger.  \n\n**Why:** Larger samples reduce variability and produce more precise estimates. This is why researchers prefer larger sample sizes when possible.\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}