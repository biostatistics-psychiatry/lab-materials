{
  "hash": "6a244a48c610f44ea22a4e96d1c25d98",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Chapter 2: Regression with a Binary Predictor\"\nformat: \n   html:\n     df-print: kable\ntoc: true\ntoc-depth: 3\nnumber-sections: true\n---\n\n\n\n\n# Introduction\n\nIn the previous chapter, we studied **intercept-only regression models**, which estimate a single summary of the outcome (a mean or a quantile).\n\nIn this chapter, we extend that framework by adding **one binary predictor**, called `trt`.\n\nThis is the simplest possible *comparative* regression model and corresponds to:\n\n-   a **two-sample t-test** in linear regression\n-   a **comparison of quantiles** in quantile regression\n\nThis chapter introduces how regression models encode **group differences**.\n\nYou will learn:\n\n-   how binary predictors enter regression models\n-   how to interpret intercepts and slopes with binary variables\n-   how group means and differences are estimated\n-   how to obtain predicted values for each group\n-   how to visualize group comparisons\n-   how linear and quantile regression differ in interpretation\n\n# Packages and Data\n\nWe use the same packages as before.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(quantreg)\nlibrary(marginaleffects)\nlibrary(here)\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n## Load data\n\nWe load the same data as before.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_clean <- read_csv2(here(\"data\", \"steps_clean.csv\"))\n```\n:::\n\n\n\n\nWe will use the treatment indicator variable `trt` as our predictor. In the original data, this indicator has three levels:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlevels(as.factor(df_clean$trt))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"self-guided\"      \"therapist-guided\" \"waitlist\"        \n```\n\n\n:::\n:::\n\n\n\n\nTo get a binary variable (i.e., one with only two levels), we subset the data to include only participants in the therapist-guided or wait-list conditions. We'll call this reduced dataset `df_red`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_red <- filter(df_clean, trt %in% c(\"therapist-guided\", \"waitlist\"))\n```\n:::\n\n\n\n\nWe transform the `trt` variable to a factor, and make sure that the wait-list condition is used as the reference.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_red <- df_red |>\n  mutate(trt = factor(trt, levels = c(\"waitlist\", \"therapist-guided\")))\n```\n:::\n\n\n\n\nBy listing wait-list as the first level, it becomes the reference level. We can check how R converts the factor to regression contrasts using `contrasts`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncontrasts(df_red$trt)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                 therapist-guided\nwaitlist                        0\ntherapist-guided                1\n```\n\n\n:::\n:::\n\n\n\n\n# Regression with a Binary Predictor\n\nWith a binary predictor, the regression model estimates **two quantities**:\n\n1.  the expected outcome in the reference group\n2.  the difference between groups\n\n## Model formula\n\nHere is the R syntax for the regression model for the LSAS post-treatment score, `lsas_post`, including only an intercept and the `trt` variable as a predictor (the intercept `~1` from the last model is implied, but can also be written out).\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nlsas_post ~ trt\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nlsas_post ~ 1 + trt\n```\n\n\n:::\n:::\n\n\n\n\nThis corresponds to the linear regression model for the conditional mean:\n\n$$\n\\mathbb{E}(LSAS_{post} \\mid trt) = \\beta_0 + \\beta_1\\, trt\n$$\n\nWhere:\n\n-   $\\beta_0$ is the expected outcome when `trt = 0` (waitlist group, since this is coded as the reference level)\n-   $\\beta_1$ is the **mean difference** between the therapist-guided and waitlist groups (therapist-guided minus waitlist)\n\nFor individual observations:\n\n$$\nLSAS_{post,i} = \\beta_0 + \\beta_1\\, trt_i + \\epsilon_i \n$$\n\n## Interpretation of coefficients\n\n| trt                  | Predicted value     |\n|----------------------|---------------------|\n| 0 (waitlist)         | $\\beta_0$           |\n| 1 (therapist-guided) | $\\beta_0 + \\beta_1$ |\n\nThus:\n\n-   $\\beta_0$ = mean (or quantile) in the control group\n-   $\\beta_1$ = difference in mean (or quantile) between the groups (i.e., treatment effect)\n\n# Linear Regression (Mean Differences)\n\n## Fit the model\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmod_lm <- lm(lsas_post ~ trt, data = df_red)\nsummary(mod_lm)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = lsas_post ~ trt, data = df_red)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-64.448 -13.448  -1.948  12.624  62.648 \n\nCoefficients:\n                    Estimate Std. Error t value Pr(>|t|)    \n(Intercept)           78.448      3.201  24.508  < 2e-16 ***\ntrttherapist-guided  -21.096      4.610  -4.576 1.25e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 24.38 on 110 degrees of freedom\n  (8 observations deleted due to missingness)\nMultiple R-squared:  0.1599,\tAdjusted R-squared:  0.1523 \nF-statistic: 20.94 on 1 and 110 DF,  p-value: 1.25e-05\n```\n\n\n:::\n:::\n\n\n\n\n::: callout-tip\n### Interpretation\n\n-   **Intercept**: estimated mean LSAS score in the control group\n-   **trt coefficient**: estimated mean difference (therapist-guided minus waitlist). A negative value indicates lower mean LSAS at post in the therapist-guided group compared to the waitlist group. We can see that the mean value of LSAS at post was 21 point lower in the therapist-guided group than in the waitlist group.\n\nWe can verify these directly from the data:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_red |>\n  group_by(trt) |>\n  summarize(mean_lsas = mean(lsas_post, na.rm = TRUE))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|trt              | mean_lsas|\n|:----------------|---------:|\n|waitlist         |  78.44828|\n|therapist-guided |  57.35185|\n\n</div>\n:::\n:::\n\n\n\n\nThe difference between these two means equals the estimated coefficient for `trt`.\n:::\n\n## Relationship to the t-test\n\nThis regression model is mathematically equivalent to a two-sample t-test:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt.test(lsas_post ~ trt, data = df_red, var.equal = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tTwo Sample t-test\n\ndata:  lsas_post by trt\nt = 4.5763, df = 110, p-value = 1.25e-05\nalternative hypothesis: true difference in means between group waitlist and group therapist-guided is not equal to 0\n95 percent confidence interval:\n 11.96065 30.23220\nsample estimates:\n        mean in group waitlist mean in group therapist-guided \n                      78.44828                       57.35185 \n```\n\n\n:::\n:::\n\n\n\n\nRegression generalizes the t-test by allowing:\n\n-   additional predictors\n-   non-normal outcomes\n-   different estimands (e.g., quantiles)\n\n# Quantile Regression (Quantile Differences)\n\n## Model formulation\n\nFor quantile regression at quantile $\\tau$:\n\n$$\nQ_{LSAS_{post} \\mid trt}(\\tau \\mid trt_i) =  \\beta_{0}(\\tau) + \\beta_{1}(\\tau)\\, trt_i \n$$\n\n-   $\\beta_{0}(\\tau)$ = $\\tau$-th quantile in the control group\n-   $\\beta_{1}(\\tau)$ = difference in quantiles between groups\n\n## Fit a median regression\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmod_rq <- rq(lsas_post ~ trt, tau = 0.5, data = df_red)\nsummary(mod_rq)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall: rq(formula = lsas_post ~ trt, tau = 0.5, data = df_red)\n\ntau: [1] 0.5\n\nCoefficients:\n                    coefficients lower bd  upper bd \n(Intercept)          77.00000     71.68339  84.63323\ntrttherapist-guided -24.00000    -31.77207 -16.61396\n```\n\n\n:::\n:::\n\n\n\n\nInterpretation is parallel to that for linear regression, but refers to **quantiles instead of means**. We can again verify group medians directly form the observed data:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_red |>\n  group_by(trt) |>\n  summarize(median_lsas = median(lsas_post, na.rm = TRUE))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|trt              | median_lsas|\n|:----------------|-----------:|\n|waitlist         |        77.0|\n|therapist-guided |        52.5|\n\n</div>\n:::\n:::\n\n\n\n\n# Predictions Using `marginaleffects`\n\nThe `marginaleffects` package allows us to compute **group-specific predictions**. This allows us to see confidence intervals for the mean (or quantile) for each group, as well as the CI for the mean (or quantile) difference between the groups.\n\n## Predicted means by group (linear regression)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_predictions(mod_lm, by = \"trt\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_vfo3it86rutvhx41xonc = TinyTable.createTableFunctions(\"tinytable_vfo3it86rutvhx41xonc\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '2', j: 1 }, { i: '2', j: 2 }, { i: '2', j: 3 }, { i: '2', j: 4 }, { i: '2', j: 5 }, { i: '2', j: 6 }, { i: '2', j: 7 } ], css_id: 'tinytable_css_t2ya8ljv39l6xkstjwik',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_o0g398yof59llcyb7yom',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_vfo3it86rutvhx41xonc.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_vfo3it86rutvhx41xonc td.tinytable_css_t2ya8ljv39l6xkstjwik, #tinytable_vfo3it86rutvhx41xonc th.tinytable_css_t2ya8ljv39l6xkstjwik {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_vfo3it86rutvhx41xonc td.tinytable_css_o0g398yof59llcyb7yom, #tinytable_vfo3it86rutvhx41xonc th.tinytable_css_o0g398yof59llcyb7yom {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_vfo3it86rutvhx41xonc\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">trt</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='7'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">waitlist</td>\n                  <td data-row=\"1\" data-col=\"2\">78.4</td>\n                  <td data-row=\"1\" data-col=\"3\">3.20</td>\n                  <td data-row=\"1\" data-col=\"4\">24.5</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">72.2</td>\n                  <td data-row=\"1\" data-col=\"7\">84.7</td>\n                </tr>\n                <tr>\n                  <td data-row=\"2\" data-col=\"1\">therapist-guided</td>\n                  <td data-row=\"2\" data-col=\"2\">57.4</td>\n                  <td data-row=\"2\" data-col=\"3\">3.32</td>\n                  <td data-row=\"2\" data-col=\"4\">17.3</td>\n                  <td data-row=\"2\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"2\" data-col=\"6\">50.8</td>\n                  <td data-row=\"2\" data-col=\"7\">63.9</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\nThis returns:\n\n-   predicted mean in each group\n-   standard errors\n-   confidence intervals for each predicted mean\n\n## Predicted medians by group (quantile regression)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_predictions(mod_rq, by = \"trt\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_tujpkgxzbmifoecwo3t1 = TinyTable.createTableFunctions(\"tinytable_tujpkgxzbmifoecwo3t1\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '2', j: 1 }, { i: '2', j: 2 }, { i: '2', j: 3 }, { i: '2', j: 4 }, { i: '2', j: 5 }, { i: '2', j: 6 }, { i: '2', j: 7 } ], css_id: 'tinytable_css_xr7v143bg0vd6bcdb0nk',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_dqfgqny71n59obb64xvg',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_tujpkgxzbmifoecwo3t1.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_tujpkgxzbmifoecwo3t1 td.tinytable_css_xr7v143bg0vd6bcdb0nk, #tinytable_tujpkgxzbmifoecwo3t1 th.tinytable_css_xr7v143bg0vd6bcdb0nk {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_tujpkgxzbmifoecwo3t1 td.tinytable_css_dqfgqny71n59obb64xvg, #tinytable_tujpkgxzbmifoecwo3t1 th.tinytable_css_dqfgqny71n59obb64xvg {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_tujpkgxzbmifoecwo3t1\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">trt</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='7'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">waitlist</td>\n                  <td data-row=\"1\" data-col=\"2\">77</td>\n                  <td data-row=\"1\" data-col=\"3\">3.09</td>\n                  <td data-row=\"1\" data-col=\"4\">24.9</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">70.9</td>\n                  <td data-row=\"1\" data-col=\"7\">83.1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"2\" data-col=\"1\">therapist-guided</td>\n                  <td data-row=\"2\" data-col=\"2\">53</td>\n                  <td data-row=\"2\" data-col=\"3\">3.71</td>\n                  <td data-row=\"2\" data-col=\"4\">14.3</td>\n                  <td data-row=\"2\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"2\" data-col=\"6\">45.7</td>\n                  <td data-row=\"2\" data-col=\"7\">60.3</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\n## Treatment effect as a contrast\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_comparisons(mod_lm, variables = \"trt\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_0c0xgomo0y37asiu6ors = TinyTable.createTableFunctions(\"tinytable_0c0xgomo0y37asiu6ors\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 } ], css_id: 'tinytable_css_5g1sgct5bd37e3p1u5ja',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 } ], css_id: 'tinytable_css_65i12sp0ph6e1643s72r',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_0c0xgomo0y37asiu6ors.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_0c0xgomo0y37asiu6ors td.tinytable_css_5g1sgct5bd37e3p1u5ja, #tinytable_0c0xgomo0y37asiu6ors th.tinytable_css_5g1sgct5bd37e3p1u5ja {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_0c0xgomo0y37asiu6ors td.tinytable_css_65i12sp0ph6e1643s72r, #tinytable_0c0xgomo0y37asiu6ors th.tinytable_css_65i12sp0ph6e1643s72r {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_0c0xgomo0y37asiu6ors\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='6'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">-21.1</td>\n                  <td data-row=\"1\" data-col=\"2\">4.61</td>\n                  <td data-row=\"1\" data-col=\"3\">-4.58</td>\n                  <td data-row=\"1\" data-col=\"4\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"5\">-30.1</td>\n                  <td data-row=\"1\" data-col=\"6\">-12.1</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\nFor quantile regression:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_comparisons(mod_rq, variables = \"trt\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_d6nu2ui34nfluc21gb4q = TinyTable.createTableFunctions(\"tinytable_d6nu2ui34nfluc21gb4q\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 } ], css_id: 'tinytable_css_ud5e8wi5t3ve1z4poogb',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 } ], css_id: 'tinytable_css_oengjqt13u1d6789gzh4',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_d6nu2ui34nfluc21gb4q.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_d6nu2ui34nfluc21gb4q td.tinytable_css_ud5e8wi5t3ve1z4poogb, #tinytable_d6nu2ui34nfluc21gb4q th.tinytable_css_ud5e8wi5t3ve1z4poogb {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_d6nu2ui34nfluc21gb4q td.tinytable_css_oengjqt13u1d6789gzh4, #tinytable_d6nu2ui34nfluc21gb4q th.tinytable_css_oengjqt13u1d6789gzh4 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_d6nu2ui34nfluc21gb4q\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='6'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">-24</td>\n                  <td data-row=\"1\" data-col=\"2\">4.83</td>\n                  <td data-row=\"1\" data-col=\"3\">-4.97</td>\n                  <td data-row=\"1\" data-col=\"4\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"5\">-33.5</td>\n                  <td data-row=\"1\" data-col=\"6\">-14.5</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\n## Ratios\n\n`marginaleffects` is highly flexible with regards to what hypothesis we can answer. For we example we can compare the ratio of mean outcomes.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Mean ratio\nhypotheses(\n  mod_lm,\n  hypothesis = \"(`(Intercept)` + `trttherapist-guided`) / `(Intercept)` = 1\"\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_vvb8898wew6pl1epxsud = TinyTable.createTableFunctions(\"tinytable_vvb8898wew6pl1epxsud\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 }, { i: '1', j: 7 } ], css_id: 'tinytable_css_hi490dckcjes6saeg4a5',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_louxz4j8lnhqfsx6zx5o',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_vvb8898wew6pl1epxsud.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_vvb8898wew6pl1epxsud td.tinytable_css_hi490dckcjes6saeg4a5, #tinytable_vvb8898wew6pl1epxsud th.tinytable_css_hi490dckcjes6saeg4a5 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_vvb8898wew6pl1epxsud td.tinytable_css_louxz4j8lnhqfsx6zx5o, #tinytable_vvb8898wew6pl1epxsud th.tinytable_css_louxz4j8lnhqfsx6zx5o {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_vvb8898wew6pl1epxsud\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Hypothesis</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">(`(Intercept)`+`trttherapist-guided`)/`(Intercept)`=1</td>\n                  <td data-row=\"1\" data-col=\"2\">-0.269</td>\n                  <td data-row=\"1\" data-col=\"3\">0.0518</td>\n                  <td data-row=\"1\" data-col=\"4\">-5.2</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">-0.37</td>\n                  <td data-row=\"1\" data-col=\"7\">-0.167</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n\n```{.r .cell-code}\n# Identical, but using b* syntax\nhypotheses(\n  mod_lm,\n  hypothesis = \"(b1 + b2) / b1 = 1\"\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_tlbldqg4d43b7t455qrp = TinyTable.createTableFunctions(\"tinytable_tlbldqg4d43b7t455qrp\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 }, { i: '1', j: 7 } ], css_id: 'tinytable_css_ng8hrowkz205p2ux0opj',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_twltxuclv6jbg8tzwfqt',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_tlbldqg4d43b7t455qrp.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_tlbldqg4d43b7t455qrp td.tinytable_css_ng8hrowkz205p2ux0opj, #tinytable_tlbldqg4d43b7t455qrp th.tinytable_css_ng8hrowkz205p2ux0opj {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_tlbldqg4d43b7t455qrp td.tinytable_css_twltxuclv6jbg8tzwfqt, #tinytable_tlbldqg4d43b7t455qrp th.tinytable_css_twltxuclv6jbg8tzwfqt {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_tlbldqg4d43b7t455qrp\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Hypothesis</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">(b1+b2)/b1=1</td>\n                  <td data-row=\"1\" data-col=\"2\">-0.269</td>\n                  <td data-row=\"1\" data-col=\"3\">0.0518</td>\n                  <td data-row=\"1\" data-col=\"4\">-5.2</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">-0.37</td>\n                  <td data-row=\"1\" data-col=\"7\">-0.167</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n\n```{.r .cell-code}\n# Ratio of quantiles\nhypotheses(\n  mod_rq,\n  hypothesis = \"(b1 + b2) / b1 = 1\"\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_u5iojkcgge3irc7nz1sy = TinyTable.createTableFunctions(\"tinytable_u5iojkcgge3irc7nz1sy\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 }, { i: '1', j: 7 } ], css_id: 'tinytable_css_n5mde5ifvp2oxd3y8pd6',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_cd2l7p8vbo9tqtiuw1io',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_u5iojkcgge3irc7nz1sy.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_u5iojkcgge3irc7nz1sy td.tinytable_css_n5mde5ifvp2oxd3y8pd6, #tinytable_u5iojkcgge3irc7nz1sy th.tinytable_css_n5mde5ifvp2oxd3y8pd6 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_u5iojkcgge3irc7nz1sy td.tinytable_css_cd2l7p8vbo9tqtiuw1io, #tinytable_u5iojkcgge3irc7nz1sy th.tinytable_css_cd2l7p8vbo9tqtiuw1io {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_u5iojkcgge3irc7nz1sy\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Hypothesis</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">(b1+b2)/b1=1</td>\n                  <td data-row=\"1\" data-col=\"2\">-0.312</td>\n                  <td data-row=\"1\" data-col=\"3\">0.0556</td>\n                  <td data-row=\"1\" data-col=\"4\">-5.61</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">-0.421</td>\n                  <td data-row=\"1\" data-col=\"7\">-0.203</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\nWe can also change the reference level without having to refit the model (and much more).\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_comparisons(\n  mod_lm,\n  variables = list(trt = c(\"therapist-guided\", \"waitlist\"))\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_45oihhqvz93nd9c5chkj = TinyTable.createTableFunctions(\"tinytable_45oihhqvz93nd9c5chkj\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 } ], css_id: 'tinytable_css_0bx549hkuceb1jgzaogs',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 } ], css_id: 'tinytable_css_hclnxwrtho5kn70w57hq',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_45oihhqvz93nd9c5chkj.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_45oihhqvz93nd9c5chkj td.tinytable_css_0bx549hkuceb1jgzaogs, #tinytable_45oihhqvz93nd9c5chkj th.tinytable_css_0bx549hkuceb1jgzaogs {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_45oihhqvz93nd9c5chkj td.tinytable_css_hclnxwrtho5kn70w57hq, #tinytable_45oihhqvz93nd9c5chkj th.tinytable_css_hclnxwrtho5kn70w57hq {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_45oihhqvz93nd9c5chkj\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='6'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">21.1</td>\n                  <td data-row=\"1\" data-col=\"2\">4.61</td>\n                  <td data-row=\"1\" data-col=\"3\">4.58</td>\n                  <td data-row=\"1\" data-col=\"4\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"5\">12.1</td>\n                  <td data-row=\"1\" data-col=\"6\">30.1</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\n## Standardized Effect Sizes\n\nIf we want to report standardized mean differences (Cohen's d), we can simply scale the estimates using an appropriate standardizer, for example the standard deviation at baseline.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsd_baseline <- sd(df_red$lsas_screen, na.rm = TRUE)\n\n# Scale each estimate\nsmd <- avg_comparisons(\n  mod_lm,\n) |>\n  mutate(\n    estimate = estimate / sd_baseline,\n    std.error = std.error / sd_baseline,\n    conf.low = conf.low / sd_baseline,\n    conf.high = conf.high / sd_baseline\n  )\nsmd\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_5qvi067yc918ilm9revp = TinyTable.createTableFunctions(\"tinytable_5qvi067yc918ilm9revp\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 } ], css_id: 'tinytable_css_pm2ecgqkqjuutrvrth1m',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 } ], css_id: 'tinytable_css_c9slmgdnhn5nk50lrt48',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_5qvi067yc918ilm9revp.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_5qvi067yc918ilm9revp td.tinytable_css_pm2ecgqkqjuutrvrth1m, #tinytable_5qvi067yc918ilm9revp th.tinytable_css_pm2ecgqkqjuutrvrth1m {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_5qvi067yc918ilm9revp td.tinytable_css_c9slmgdnhn5nk50lrt48, #tinytable_5qvi067yc918ilm9revp th.tinytable_css_c9slmgdnhn5nk50lrt48 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_5qvi067yc918ilm9revp\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">97.5 %</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">-1.17</td>\n                  <td data-row=\"1\" data-col=\"2\">0.256</td>\n                  <td data-row=\"1\" data-col=\"3\">-4.58</td>\n                  <td data-row=\"1\" data-col=\"4\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"5\">-1.68</td>\n                  <td data-row=\"1\" data-col=\"6\">-0.671</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n\n```{.r .cell-code}\n# Equivalently, add standardization to hypothesis\navg_comparisons(\n  mod_lm,\n  variables = \"trt\",\n  hypothesis = \"b1 / 17.97963 = 0\" # sd_baseline is 17.97963\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_0gxnickzlxjhnu5pg5ya = TinyTable.createTableFunctions(\"tinytable_0gxnickzlxjhnu5pg5ya\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 }, { i: '1', j: 7 } ], css_id: 'tinytable_css_622kl5vqffw4qpu82dh6',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_o8joc33zervz2mimde1e',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_0gxnickzlxjhnu5pg5ya.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_0gxnickzlxjhnu5pg5ya td.tinytable_css_622kl5vqffw4qpu82dh6, #tinytable_0gxnickzlxjhnu5pg5ya th.tinytable_css_622kl5vqffw4qpu82dh6 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_0gxnickzlxjhnu5pg5ya td.tinytable_css_o8joc33zervz2mimde1e, #tinytable_0gxnickzlxjhnu5pg5ya th.tinytable_css_o8joc33zervz2mimde1e {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_0gxnickzlxjhnu5pg5ya\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Hypothesis</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='7'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">b1/17.97963=0</td>\n                  <td data-row=\"1\" data-col=\"2\">-1.17</td>\n                  <td data-row=\"1\" data-col=\"3\">0.256</td>\n                  <td data-row=\"1\" data-col=\"4\">-4.58</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">-1.68</td>\n                  <td data-row=\"1\" data-col=\"7\">-0.671</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\n# Visualization\n\n## Group means with confidence intervals\n\nUsing `marginaleffects::plot_predictions`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_predictions(mod_lm, by = \"trt\") +\n  labs(\n    x = \"Treatment group\",\n    y = \"Estimated Mean LSAS (95% CI)\",\n    title = \"Estimated Group Means from Linear Regression\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](regression-one-binary-predictor_files/figure-html/plot-group-means-1.png){width=672}\n:::\n:::\n\n\n\n\n## Group medians with confidence intervals\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_predictions(mod_rq, by = \"trt\") +\n  labs(\n    x = \"Treatment group\",\n    y = \"Estimated Median LSAS (95% CI)\",\n    title = \"Estimated Group Medians from Quantile Regression\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](regression-one-binary-predictor_files/figure-html/plot-group-medians-1.png){width=672}\n:::\n:::\n\n\n\n\n# Summary\n\nIn this chapter you learned:\n\n-   how binary predictors enter regression models\n-   how intercepts and coefficients (slopes) encode group means and differences\n-   how linear regression estimates **mean differences**\n-   how quantile regression estimates **quantile differences**\n-   how regression relates to t-tests\n-   how to obtain predictions, contrasts, and confidence intervals\n-   how to visualize group comparisons\n\nThis chapter provides the foundation for models with **categorical predictors and later numeric predictors, and multiple predictors**.\n",
    "supporting": [
      "regression-one-binary-predictor_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}