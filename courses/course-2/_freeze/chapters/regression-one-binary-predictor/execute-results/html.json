{
  "hash": "e2744733df071e0d6ef992a97e08d8e3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Chapter 2: Regression with a Binary Predictor\"\nformat: \n   html:\n     df-print: kable\ntoc: true\ntoc-depth: 3\nnumber-sections: true\n---\n\n\n\n\n# Introduction\n\nIn the previous chapter, we studied **intercept-only regression models**, which estimate a single summary of the outcome (a mean or a quantile).\n\nIn this chapter, we extend that framework by adding **one binary predictor**, called `trt`.\n\nThis is the simplest possible *comparative* regression model and corresponds to:\n\n-   a **two-sample t-test** in linear regression\n-   a **comparison of quantiles** in quantile regression\n\nThis chapter introduces how regression models encode **group differences**.\n\nYou will learn:\n\n-   how binary predictors enter regression models\n-   how to interpret intercepts and slopes with binary variables\n-   how group means and differences are estimated\n-   how to obtain predicted values for each group\n-   how to visualize group comparisons\n-   how linear and quantile regression differ in interpretation\n\n# Packages and Data\n\nWe use the same packages as before.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(quantreg)\nlibrary(marginaleffects)\nlibrary(here)\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n## Load data\n\nWe load the same data as before.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_clean <- read_csv2(here(\"data\", \"steps_clean.csv\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nℹ Using \"','\" as decimal and \"'.'\" as grouping mark. Use `read_delim()` for more control.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 181 Columns: 37\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr  (1): trt\ndbl (34): id, lsas_screen, gad_screen, phq9_screen, bbq_screen, scs_screen, ...\nnum  (2): dmrsodf_screen, dmrsodf_post\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n\nWe will use the treatment indicator variable `trt` as our predictor. In the original data, this indicator has three levels:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlevels(as.factor(df_clean$trt))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"self-guided\"      \"therapist-guided\" \"waitlist\"        \n```\n\n\n:::\n:::\n\n\n\n\nTo get a binary variable (i.e., one with only two levels), we subset the data to include only participants in the therapist-guided or waitlist conditions. We'll call this reduced dataset `df_red`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_red <- filter(df_clean, trt %in% c(\"therapist-guided\", \"waitlist\"))\n```\n:::\n\n\n\n\nWe transform the `trt` variable to a factor, and make sure that the waitlist condition is used as the reference.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_red <- df_red |>\n  mutate(trt = factor(trt, levels = c(\"waitlist\", \"therapist-guided\")))\n```\n:::\n\n\n\n\nBy listing waitlist as the first level, it becomes the reference level. We can check how R converts the factor to regression contrasts using `contrasts`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncontrasts(df_red$trt)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                 therapist-guided\nwaitlist                        0\ntherapist-guided                1\n```\n\n\n:::\n:::\n\n\n\n\n# Regression with a Binary Predictor\n\nWith a binary predictor, the regression model estimates **two quantities**:\n\n1.  the expected outcome in the reference group\n2.  the difference between groups\n\n## Model formula\n\nHere is the R syntax for the regression model for the LSAS post-treatment score, `lsas_post`, including only an intercept and the `trt` variable as a predictor (the intercept `~1` from the last model is implied, but can also be written out).\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nlsas_post ~ trt\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nlsas_post ~ 1 + trt\n```\n\n\n:::\n:::\n\n\n\n\nThis corresponds to the linear regression model for the conditional mean:\n\n$$\n\\mathbb{E}(LSAS_{post} \\mid trt) = \\beta_0 + \\beta_1\\, trt\n$$\n\nWhere:\n\n-   $\\beta_0$ is the expected outcome when `trt = 0` (waitlist group, since this is coded as the reference level)\n-   $\\beta_1$ is the **mean difference** between the therapist-guided and waitlist groups (therapist-guided minus waitlist)\n\nFor individual observations:\n\n$$\nLSAS_{post,i} = \\beta_0 + \\beta_1\\, trt_i + \\epsilon_i \n$$\n\n## Interpretation of coefficients\n\n| trt                  | Predicted value     |\n|----------------------|---------------------|\n| 0 (waitlist)         | $\\beta_0$           |\n| 1 (therapist-guided) | $\\beta_0 + \\beta_1$ |\n\nThus:\n\n-   $\\beta_0$ = mean (or quantile) in the control group\n-   $\\beta_1$ = difference in mean (or quantile) between the groups (i.e., treatment effect)\n\n# Linear Regression (Mean Differences)\n\n## Fit the model\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmod_lm <- lm(lsas_post ~ trt, data = df_red)\nsummary(mod_lm)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = lsas_post ~ trt, data = df_red)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-64.448 -13.448  -1.948  12.624  62.648 \n\nCoefficients:\n                    Estimate Std. Error t value Pr(>|t|)    \n(Intercept)           78.448      3.201  24.508  < 2e-16 ***\ntrttherapist-guided  -21.096      4.610  -4.576 1.25e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 24.38 on 110 degrees of freedom\n  (8 observations deleted due to missingness)\nMultiple R-squared:  0.1599,\tAdjusted R-squared:  0.1523 \nF-statistic: 20.94 on 1 and 110 DF,  p-value: 1.25e-05\n```\n\n\n:::\n:::\n\n\n\n\n::: callout-tip\n### Interpretation\n\n-   **Intercept**: estimated mean LSAS score in the control group\n-   **trt coefficient**: estimated mean difference (therapist-guided minus waitlist). A negative value indicates lower mean LSAS at post in the therapist-guided group compared to the waitlist group. We can see that the mean value of LSAS at post was 21 point lower in the therapist-guided group than in the waitlist group.\n\nWe can verify these directly from the data:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_red |>\n  group_by(trt) |>\n  summarize(mean_lsas = mean(lsas_post, na.rm = TRUE))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|trt              | mean_lsas|\n|:----------------|---------:|\n|waitlist         |  78.44828|\n|therapist-guided |  57.35185|\n\n</div>\n:::\n:::\n\n\n\n\nThe difference between these two means equals the estimated coefficient for `trt`.\n:::\n\n## Relationship to the t-test\n\nThis regression model is mathematically equivalent to a two-sample t-test:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt.test(lsas_post ~ trt, data = df_red, var.equal = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tTwo Sample t-test\n\ndata:  lsas_post by trt\nt = 4.5763, df = 110, p-value = 1.25e-05\nalternative hypothesis: true difference in means between group waitlist and group therapist-guided is not equal to 0\n95 percent confidence interval:\n 11.96065 30.23220\nsample estimates:\n        mean in group waitlist mean in group therapist-guided \n                      78.44828                       57.35185 \n```\n\n\n:::\n:::\n\n\n\n\nRegression generalizes the t-test by allowing:\n\n-   additional predictors\n-   non-normal outcomes\n-   different estimands (e.g., quantiles)\n\n# Quantile Regression (Quantile Differences)\n\n## Model formulation\n\nFor quantile regression at quantile $\\tau$:\n\n$$\nQ_{LSAS_{post} \\mid trt}(\\tau \\mid trt_i) =  \\beta_{0}(\\tau) + \\beta_{1}(\\tau)\\, trt_i \n$$\n\n-   $\\beta_{0}(\\tau)$ = $\\tau$-th quantile in the control group\n-   $\\beta_{1}(\\tau)$ = difference in quantiles between groups\n\n## Fit a median regression\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmod_rq <- rq(lsas_post ~ trt, tau = 0.5, data = df_red)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in rq.fit.br(x, y, tau = tau, ...): Solution may be nonunique\n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(mod_rq)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in rq.fit.br(x, y, tau = tau, ci = TRUE, ...): Solution may be\nnonunique\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall: rq(formula = lsas_post ~ trt, tau = 0.5, data = df_red)\n\ntau: [1] 0.5\n\nCoefficients:\n                    coefficients lower bd  upper bd \n(Intercept)          77.00000     71.68339  84.63323\ntrttherapist-guided -24.00000    -31.77207 -16.61396\n```\n\n\n:::\n:::\n\n\n\n\nWe can again verify group medians directly:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_red |>\n  group_by(trt) |>\n  summarize(median_lsas = median(lsas_post, na.rm = TRUE))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|trt              | median_lsas|\n|:----------------|-----------:|\n|waitlist         |        77.0|\n|therapist-guided |        52.5|\n\n</div>\n:::\n:::\n\n\n\n\n# Model Objects and Coefficients\n\n## Linear regression object\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(mod_lm)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"coefficients\"  \"residuals\"     \"effects\"       \"rank\"         \n [5] \"fitted.values\" \"assign\"        \"qr\"            \"df.residual\"  \n [9] \"na.action\"     \"contrasts\"     \"xlevels\"       \"call\"         \n[13] \"terms\"         \"model\"        \n```\n\n\n:::\n\n```{.r .cell-code}\ncoef(mod_lm)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n        (Intercept) trttherapist-guided \n           78.44828           -21.09642 \n```\n\n\n:::\n:::\n\n\n\n\n-   `(Intercept)`: control group mean\n-   `trt`: mean difference\n\nPredicted values for the first few participants (determined only by their group)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(fitted(mod_lm))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       1        2        3        5        6        7 \n57.35185 78.44828 57.35185 57.35185 57.35185 57.35185 \n```\n\n\n:::\n:::\n\n\n\n\n## Quantile regression object\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoef(mod_rq)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n        (Intercept) trttherapist-guided \n                 77                 -24 \n```\n\n\n:::\n:::\n\n\n\n\nInterpretation is parallel, but refers to **quantiles instead of means**.\n\n# Predictions Using `marginaleffects`\n\nThe `marginaleffects` package allows us to compute **group-specific predictions**. This allows us to see confidence intervals for the mean (or quantile) for each group, as well as the CI for the mean (or quantile) difference between the groups.\n\n## Predicted means by group (linear regression)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_predictions(mod_lm, by = \"trt\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_gsgonf3xd0pm3q53ko63 = TinyTable.createTableFunctions(\"tinytable_gsgonf3xd0pm3q53ko63\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '2', j: 1 }, { i: '2', j: 2 }, { i: '2', j: 3 }, { i: '2', j: 4 }, { i: '2', j: 5 }, { i: '2', j: 6 }, { i: '2', j: 7 } ], css_id: 'tinytable_css_iidethfmirznheuv06gj',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_vt7h1ievl07el99ma614',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_gsgonf3xd0pm3q53ko63.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_gsgonf3xd0pm3q53ko63 td.tinytable_css_iidethfmirznheuv06gj, #tinytable_gsgonf3xd0pm3q53ko63 th.tinytable_css_iidethfmirznheuv06gj {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_gsgonf3xd0pm3q53ko63 td.tinytable_css_vt7h1ievl07el99ma614, #tinytable_gsgonf3xd0pm3q53ko63 th.tinytable_css_vt7h1ievl07el99ma614 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_gsgonf3xd0pm3q53ko63\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">trt</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='7'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">waitlist</td>\n                  <td data-row=\"1\" data-col=\"2\">78.4</td>\n                  <td data-row=\"1\" data-col=\"3\">3.20</td>\n                  <td data-row=\"1\" data-col=\"4\">24.5</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">72.2</td>\n                  <td data-row=\"1\" data-col=\"7\">84.7</td>\n                </tr>\n                <tr>\n                  <td data-row=\"2\" data-col=\"1\">therapist-guided</td>\n                  <td data-row=\"2\" data-col=\"2\">57.4</td>\n                  <td data-row=\"2\" data-col=\"3\">3.32</td>\n                  <td data-row=\"2\" data-col=\"4\">17.3</td>\n                  <td data-row=\"2\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"2\" data-col=\"6\">50.8</td>\n                  <td data-row=\"2\" data-col=\"7\">63.9</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\nThis returns:\n\n-   predicted mean in each group\n-   standard errors\n-   confidence intervals for each predicted mean\n\n## Predicted medians by group (quantile regression)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_predictions(mod_rq, by = \"trt\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_vff1t0tgddpcha9g3c9g = TinyTable.createTableFunctions(\"tinytable_vff1t0tgddpcha9g3c9g\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '2', j: 1 }, { i: '2', j: 2 }, { i: '2', j: 3 }, { i: '2', j: 4 }, { i: '2', j: 5 }, { i: '2', j: 6 }, { i: '2', j: 7 } ], css_id: 'tinytable_css_5yeu9cgennektj8v2fyp',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_5hjyw24u97gxtqrcnvdc',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_vff1t0tgddpcha9g3c9g.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_vff1t0tgddpcha9g3c9g td.tinytable_css_5yeu9cgennektj8v2fyp, #tinytable_vff1t0tgddpcha9g3c9g th.tinytable_css_5yeu9cgennektj8v2fyp {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_vff1t0tgddpcha9g3c9g td.tinytable_css_5hjyw24u97gxtqrcnvdc, #tinytable_vff1t0tgddpcha9g3c9g th.tinytable_css_5hjyw24u97gxtqrcnvdc {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_vff1t0tgddpcha9g3c9g\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">trt</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='7'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">waitlist</td>\n                  <td data-row=\"1\" data-col=\"2\">77</td>\n                  <td data-row=\"1\" data-col=\"3\">3.09</td>\n                  <td data-row=\"1\" data-col=\"4\">24.9</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">70.9</td>\n                  <td data-row=\"1\" data-col=\"7\">83.1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"2\" data-col=\"1\">therapist-guided</td>\n                  <td data-row=\"2\" data-col=\"2\">53</td>\n                  <td data-row=\"2\" data-col=\"3\">3.71</td>\n                  <td data-row=\"2\" data-col=\"4\">14.3</td>\n                  <td data-row=\"2\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"2\" data-col=\"6\">45.7</td>\n                  <td data-row=\"2\" data-col=\"7\">60.3</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\n## Treatment effect as a contrast\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_comparisons(mod_lm, variables = \"trt\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_pzg1n8p4bvisrb2m06c8 = TinyTable.createTableFunctions(\"tinytable_pzg1n8p4bvisrb2m06c8\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 } ], css_id: 'tinytable_css_5v5mrpto2h18yfc4cx53',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 } ], css_id: 'tinytable_css_1w8jd38zr3st6cpu7i19',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_pzg1n8p4bvisrb2m06c8.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_pzg1n8p4bvisrb2m06c8 td.tinytable_css_5v5mrpto2h18yfc4cx53, #tinytable_pzg1n8p4bvisrb2m06c8 th.tinytable_css_5v5mrpto2h18yfc4cx53 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_pzg1n8p4bvisrb2m06c8 td.tinytable_css_1w8jd38zr3st6cpu7i19, #tinytable_pzg1n8p4bvisrb2m06c8 th.tinytable_css_1w8jd38zr3st6cpu7i19 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_pzg1n8p4bvisrb2m06c8\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='6'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">-21.1</td>\n                  <td data-row=\"1\" data-col=\"2\">4.61</td>\n                  <td data-row=\"1\" data-col=\"3\">-4.58</td>\n                  <td data-row=\"1\" data-col=\"4\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"5\">-30.1</td>\n                  <td data-row=\"1\" data-col=\"6\">-12.1</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\nFor quantile regression:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_comparisons(mod_rq, variables = \"trt\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_sgr5chbptavm5qn35lb0 = TinyTable.createTableFunctions(\"tinytable_sgr5chbptavm5qn35lb0\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 } ], css_id: 'tinytable_css_2kl6z9ypzga5ko98ol0d',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 } ], css_id: 'tinytable_css_4hp43k8gi0hq5yx4k67e',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_sgr5chbptavm5qn35lb0.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_sgr5chbptavm5qn35lb0 td.tinytable_css_2kl6z9ypzga5ko98ol0d, #tinytable_sgr5chbptavm5qn35lb0 th.tinytable_css_2kl6z9ypzga5ko98ol0d {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_sgr5chbptavm5qn35lb0 td.tinytable_css_4hp43k8gi0hq5yx4k67e, #tinytable_sgr5chbptavm5qn35lb0 th.tinytable_css_4hp43k8gi0hq5yx4k67e {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_sgr5chbptavm5qn35lb0\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='6'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">-24</td>\n                  <td data-row=\"1\" data-col=\"2\">4.83</td>\n                  <td data-row=\"1\" data-col=\"3\">-4.97</td>\n                  <td data-row=\"1\" data-col=\"4\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"5\">-33.5</td>\n                  <td data-row=\"1\" data-col=\"6\">-14.5</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\n## Ratios\n\n`marginaleffects` is highly flexible with regards to what hypothesis we can answer. For we example we can compare the ratio of mean outcomes.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Mean ratio\nhypotheses(\n  mod_lm,\n  hypothesis = \"(`(Intercept)` + `trttherapist-guided`) / `(Intercept)` = 1\"\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_1x7zwea1y2uhfvo5aokp = TinyTable.createTableFunctions(\"tinytable_1x7zwea1y2uhfvo5aokp\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 }, { i: '1', j: 7 } ], css_id: 'tinytable_css_ljly6d7rykzri53bf19q',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_t8e5gq3fdjuee3n628nt',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_1x7zwea1y2uhfvo5aokp.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_1x7zwea1y2uhfvo5aokp td.tinytable_css_ljly6d7rykzri53bf19q, #tinytable_1x7zwea1y2uhfvo5aokp th.tinytable_css_ljly6d7rykzri53bf19q {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_1x7zwea1y2uhfvo5aokp td.tinytable_css_t8e5gq3fdjuee3n628nt, #tinytable_1x7zwea1y2uhfvo5aokp th.tinytable_css_t8e5gq3fdjuee3n628nt {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_1x7zwea1y2uhfvo5aokp\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Hypothesis</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">(`(Intercept)`+`trttherapist-guided`)/`(Intercept)`=1</td>\n                  <td data-row=\"1\" data-col=\"2\">-0.269</td>\n                  <td data-row=\"1\" data-col=\"3\">0.0518</td>\n                  <td data-row=\"1\" data-col=\"4\">-5.2</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">-0.37</td>\n                  <td data-row=\"1\" data-col=\"7\">-0.167</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n\n```{.r .cell-code}\n# Identical, but using b* syntax\nhypotheses(\n  mod_lm,\n  hypothesis = \"(b1 + b2) / b1 = 1\"\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_uvg97v93srh4kp79zc7o = TinyTable.createTableFunctions(\"tinytable_uvg97v93srh4kp79zc7o\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 }, { i: '1', j: 7 } ], css_id: 'tinytable_css_9amzb4czp8n4h9d6bgxj',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_tajh2o986v0a5ej3l0sc',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_uvg97v93srh4kp79zc7o.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_uvg97v93srh4kp79zc7o td.tinytable_css_9amzb4czp8n4h9d6bgxj, #tinytable_uvg97v93srh4kp79zc7o th.tinytable_css_9amzb4czp8n4h9d6bgxj {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_uvg97v93srh4kp79zc7o td.tinytable_css_tajh2o986v0a5ej3l0sc, #tinytable_uvg97v93srh4kp79zc7o th.tinytable_css_tajh2o986v0a5ej3l0sc {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_uvg97v93srh4kp79zc7o\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Hypothesis</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">(b1+b2)/b1=1</td>\n                  <td data-row=\"1\" data-col=\"2\">-0.269</td>\n                  <td data-row=\"1\" data-col=\"3\">0.0518</td>\n                  <td data-row=\"1\" data-col=\"4\">-5.2</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">-0.37</td>\n                  <td data-row=\"1\" data-col=\"7\">-0.167</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n\n```{.r .cell-code}\n# Ratio of quantiles\nhypotheses(\n  mod_rq,\n  hypothesis = \"(b1 + b2) / b1 = 1\"\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_lr5dmiw5gchw8hkcjbzs = TinyTable.createTableFunctions(\"tinytable_lr5dmiw5gchw8hkcjbzs\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 }, { i: '1', j: 7 } ], css_id: 'tinytable_css_uhn2ymz2v3y0xda95p4r',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_g49mh01yw7glzanvv9cg',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_lr5dmiw5gchw8hkcjbzs.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_lr5dmiw5gchw8hkcjbzs td.tinytable_css_uhn2ymz2v3y0xda95p4r, #tinytable_lr5dmiw5gchw8hkcjbzs th.tinytable_css_uhn2ymz2v3y0xda95p4r {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_lr5dmiw5gchw8hkcjbzs td.tinytable_css_g49mh01yw7glzanvv9cg, #tinytable_lr5dmiw5gchw8hkcjbzs th.tinytable_css_g49mh01yw7glzanvv9cg {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_lr5dmiw5gchw8hkcjbzs\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Hypothesis</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">(b1+b2)/b1=1</td>\n                  <td data-row=\"1\" data-col=\"2\">-0.312</td>\n                  <td data-row=\"1\" data-col=\"3\">0.0556</td>\n                  <td data-row=\"1\" data-col=\"4\">-5.61</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">-0.421</td>\n                  <td data-row=\"1\" data-col=\"7\">-0.203</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\nWe can also change the reference level without having to refit the model (and much more).\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_comparisons(\n  mod_lm,\n  variables = list(trt = c(\"therapist-guided\", \"waitlist\"))\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_o3is51l5bdpbh4q8zaeo = TinyTable.createTableFunctions(\"tinytable_o3is51l5bdpbh4q8zaeo\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 } ], css_id: 'tinytable_css_j6l7h128o2l0b4n7s1hn',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 } ], css_id: 'tinytable_css_fdm5dbkh1kzx1zl9ummc',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_o3is51l5bdpbh4q8zaeo.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_o3is51l5bdpbh4q8zaeo td.tinytable_css_j6l7h128o2l0b4n7s1hn, #tinytable_o3is51l5bdpbh4q8zaeo th.tinytable_css_j6l7h128o2l0b4n7s1hn {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_o3is51l5bdpbh4q8zaeo td.tinytable_css_fdm5dbkh1kzx1zl9ummc, #tinytable_o3is51l5bdpbh4q8zaeo th.tinytable_css_fdm5dbkh1kzx1zl9ummc {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_o3is51l5bdpbh4q8zaeo\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='6'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">21.1</td>\n                  <td data-row=\"1\" data-col=\"2\">4.61</td>\n                  <td data-row=\"1\" data-col=\"3\">4.58</td>\n                  <td data-row=\"1\" data-col=\"4\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"5\">12.1</td>\n                  <td data-row=\"1\" data-col=\"6\">30.1</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\n## Standardized Effect Sizes\n\nIf we want to report standardized mean differences (Cohen's d), we can simply scale the estimates using an appropriate standardizer, for example the standard deviation at baseline.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsd_baseline <- sd(df_red$lsas_screen, na.rm = TRUE)\n\n# Scale each estimate\nsmd <- avg_comparisons(\n  mod_lm,\n) |>\n  mutate(\n    estimate = estimate / sd_baseline,\n    std.error = std.error / sd_baseline,\n    conf.low = conf.low / sd_baseline,\n    conf.high = conf.high / sd_baseline\n  )\nsmd\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_o5h43fuk7rut8s48lolg = TinyTable.createTableFunctions(\"tinytable_o5h43fuk7rut8s48lolg\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 } ], css_id: 'tinytable_css_ls9a3zueu88eo8in374b',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 } ], css_id: 'tinytable_css_581oqzq3gzezk38zw4xr',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_o5h43fuk7rut8s48lolg.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_o5h43fuk7rut8s48lolg td.tinytable_css_ls9a3zueu88eo8in374b, #tinytable_o5h43fuk7rut8s48lolg th.tinytable_css_ls9a3zueu88eo8in374b {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_o5h43fuk7rut8s48lolg td.tinytable_css_581oqzq3gzezk38zw4xr, #tinytable_o5h43fuk7rut8s48lolg th.tinytable_css_581oqzq3gzezk38zw4xr {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_o5h43fuk7rut8s48lolg\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">97.5 %</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">-1.17</td>\n                  <td data-row=\"1\" data-col=\"2\">0.256</td>\n                  <td data-row=\"1\" data-col=\"3\">-4.58</td>\n                  <td data-row=\"1\" data-col=\"4\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"5\">-1.68</td>\n                  <td data-row=\"1\" data-col=\"6\">-0.671</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n\n```{.r .cell-code}\n# Equivalently, add standardization to hypothesis\navg_comparisons(\n  mod_lm,\n  variables = \"trt\",\n  hypothesis = \"b1 / 17.97963 = 0\" # sd_baseline is 17.97963\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_b5uduy0ckfsi82ddcs0j = TinyTable.createTableFunctions(\"tinytable_b5uduy0ckfsi82ddcs0j\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '1', j: 5 }, { i: '1', j: 6 }, { i: '1', j: 7 } ], css_id: 'tinytable_css_1uqwlsagqxo7l57kg2pf',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 } ], css_id: 'tinytable_css_1zm0zd7nku8gqyol8cvn',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_b5uduy0ckfsi82ddcs0j.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_b5uduy0ckfsi82ddcs0j td.tinytable_css_1uqwlsagqxo7l57kg2pf, #tinytable_b5uduy0ckfsi82ddcs0j th.tinytable_css_1uqwlsagqxo7l57kg2pf {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_b5uduy0ckfsi82ddcs0j td.tinytable_css_1zm0zd7nku8gqyol8cvn, #tinytable_b5uduy0ckfsi82ddcs0j th.tinytable_css_1zm0zd7nku8gqyol8cvn {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: var(--tt-line-color); --line-color-left: var(--tt-line-color); --line-color-right: var(--tt-line-color); --line-color-top: var(--tt-line-color); --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_b5uduy0ckfsi82ddcs0j\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">Hypothesis</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">Estimate</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">Std. Error</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">z</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">Pr(&gt;|z|)</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">2.5 %</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">97.5 %</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='7'>Type: response\n</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">b1/17.97963=0</td>\n                  <td data-row=\"1\" data-col=\"2\">-1.17</td>\n                  <td data-row=\"1\" data-col=\"3\">0.256</td>\n                  <td data-row=\"1\" data-col=\"4\">-4.58</td>\n                  <td data-row=\"1\" data-col=\"5\">&lt;0.001</td>\n                  <td data-row=\"1\" data-col=\"6\">-1.68</td>\n                  <td data-row=\"1\" data-col=\"7\">-0.671</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\n# Visualization\n\n## Group means with confidence intervals\n\nUsing `marginaleffects::plot_predictions`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_predictions(mod_lm, by = \"trt\") +\n  labs(\n    x = \"Treatment group\",\n    y = \"Estimated Mean LSAS (95% CI)\",\n    title = \"Estimated Group Means from Linear Regression\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](regression-one-binary-predictor_files/figure-html/plot-group-means-1.png){width=672}\n:::\n:::\n\n\n\n\n## Group medians with confidence intervals\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_predictions(mod_rq, by = \"trt\") +\n  labs(\n    x = \"Treatment group\",\n    y = \"Estimated Median LSAS (95% CI)\",\n    title = \"Estimated Group Medians from Quantile Regression\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](regression-one-binary-predictor_files/figure-html/plot-group-medians-1.png){width=672}\n:::\n:::\n\n\n\n\n# Summary\n\nIn this chapter you learned:\n\n-   how binary predictors enter regression models\n-   how intercepts and coefficients (slopes) encode group means and differences\n-   how linear regression estimates **mean differences**\n-   how quantile regression estimates **quantile differences**\n-   how regression relates to t-tests\n-   how to obtain predictions, contrasts, and confidence intervals\n-   how to visualize group comparisons\n\nThis chapter provides the foundation for models with **categorical predictors and later numeric predictors, and multiple predictors**.\n",
    "supporting": [
      "regression-one-binary-predictor_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}